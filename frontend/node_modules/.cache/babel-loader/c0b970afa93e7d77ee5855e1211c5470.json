{"ast":null,"code":"import _regeneratorRuntime from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var apiRequest=require('./base').apiRequest;function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return apiRequest('login',\"POST\",{username:username,password:password});case 2:response=_context.sent;if(!(response.status===200)){_context.next=11;break;}localStorage.setItem(\"loginUsername\",username);localStorage.setItem(\"loginToken\",response.data.value.stringToken);localStorage.setItem(\"loginAdmin\",response.data.value.role===\"Admin\"?true:false);_context.next=9;return apiRequest(\"user/\".concat(username));case 9:response=_context.sent;if(response.status===200){localStorage.setItem(\"loginFirstName\",response.data.firstName);localStorage.setItem(\"loginLastName\",response.data.lastname);}case 11:return _context.abrupt(\"return\",response);case 12:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}function logout(){localStorage.clear();}module.exports={login:login,logout:logout};","map":{"version":3,"names":["apiRequest","require","login","username","password","response","status","localStorage","setItem","data","value","stringToken","role","firstName","lastname","logout","clear","module","exports"],"sources":["/home/oliver/Desktop/awl-raumreservierung/frontend/src/api/login.js"],"sourcesContent":["const apiRequest = require('./base').apiRequest;\n\nasync function login(username, password){\n    var response = await apiRequest('login', \"POST\", {username: username, password: password});\n\n    if(response.status === 200){\n        localStorage.setItem(\"loginUsername\", username);\n        localStorage.setItem(\"loginToken\", response.data.value.stringToken);\n        localStorage.setItem(\"loginAdmin\", response.data.value.role === \"Admin\" ? true : false);\n        response = await apiRequest(`user/${username}`);\n        if(response.status === 200){\n            localStorage.setItem(\"loginFirstName\", response.data.firstName);\n            localStorage.setItem(\"loginLastName\", response.data.lastname);\n        }\n    }\n\n    return response;\n}\n\nfunction logout(){\n    localStorage.clear();\n}\n\nmodule.exports = {\n    login,\n    logout\n};"],"mappings":"gSAAA,GAAMA,WAAU,CAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,UAArC,C,QAEeE,M,iIAAf,iBAAqBC,QAArB,CAA+BC,QAA/B,uJACyBJ,WAAU,CAAC,OAAD,CAAU,MAAV,CAAkB,CAACG,QAAQ,CAAEA,QAAX,CAAqBC,QAAQ,CAAEA,QAA/B,CAAlB,CADnC,QACQC,QADR,oBAGOA,QAAQ,CAACC,MAAT,GAAoB,GAH3B,2BAIQC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCL,QAAtC,EACAI,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCH,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoBC,WAAvD,EACAJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCH,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoBE,IAApB,GAA6B,OAA7B,CAAuC,IAAvC,CAA8C,KAAjF,EANR,sBAOyBZ,WAAU,gBAASG,QAAT,EAPnC,QAOQE,QAPR,eAQQ,GAAGA,QAAQ,CAACC,MAAT,GAAoB,GAAvB,CAA2B,CACvBC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAuCH,QAAQ,CAACI,IAAT,CAAcI,SAArD,EACAN,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCH,QAAQ,CAACI,IAAT,CAAcK,QAApD,EACH,CAXT,wCAcWT,QAdX,yD,wCAiBA,QAASU,OAAT,EAAiB,CACbR,YAAY,CAACS,KAAb,GACH,CAEDC,MAAM,CAACC,OAAP,CAAiB,CACbhB,KAAK,CAALA,KADa,CAEba,MAAM,CAANA,MAFa,CAAjB"},"metadata":{},"sourceType":"module"}