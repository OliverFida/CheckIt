{"ast":null,"code":"import _objectSpread from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Component imports\nimport React,{useEffect,useState,useContext}from'react';import{Nav,NavDropdown}from'react-bootstrap';import{HomePageContext}from'../../contexts/HomePageContext';// API imports\nimport{jsx as _jsx}from\"react/jsx-runtime\";var RoomsAPI=require('../../api/rooms');export default function AppNavBooking(){return/*#__PURE__*/_jsx(Nav,{children:/*#__PURE__*/_jsx(RoomDropDown,{})});};function RoomDropDown(){var _useContext=useContext(HomePageContext),hpContext=_useContext.hpContext,setHpContext=_useContext.setHpContext;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),elements=_useState4[0],setElements=_useState4[1];useEffect(function(){function doAsync(){return _doAsync.apply(this,arguments);}function _doAsync(){_doAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var tempRooms;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return RoomsAPI.getRooms();case 2:tempRooms=_context.sent;_context.next=5;return setRooms(tempRooms.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return _doAsync.apply(this,arguments);};doAsync();},[]);useEffect(function(){setElements(rooms.map(function(room){return room.active?/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:function onClick(){onRoomSelect(room.name,room.id);},children:room.name},\"room_\".concat(room.number)):null;}));},[rooms]);useEffect(function(){if(rooms.length>0)onRoomSelect(rooms[0].name,rooms[0].id);},[elements]);var onRoomSelect=function onRoomSelect(name,id){if(hpContext.roomSelection.id===id)return;setHpContext(_objectSpread(_objectSpread({},hpContext),{},{roomSelection:_objectSpread(_objectSpread({},hpContext.roomSelection),{},{name:name,id:id})}));};return/*#__PURE__*/_jsx(NavDropdown,{title:hpContext.roomSelection.name?hpContext.roomSelection.name:\"Raum\",align:\"end\",children:elements});}","map":{"version":3,"names":["React","useEffect","useState","useContext","Nav","NavDropdown","HomePageContext","RoomsAPI","require","AppNavBooking","RoomDropDown","hpContext","setHpContext","rooms","setRooms","elements","setElements","doAsync","getRooms","tempRooms","data","map","room","active","onRoomSelect","name","id","number","length","roomSelection"],"sources":["/home/oliver/Desktop/awl-raumreservierung/frontend/src/pages/components/AppNavBooking.js"],"sourcesContent":["// Component imports\nimport React, {useEffect, useState, useContext} from 'react';\nimport {Nav, NavDropdown} from 'react-bootstrap';\nimport { HomePageContext } from '../../contexts/HomePageContext';\n// API imports\nconst RoomsAPI = require('../../api/rooms');\n\nexport default function AppNavBooking(){return(\n        <Nav>\n            <RoomDropDown />\n        </Nav>\n    );\n};\n\nfunction RoomDropDown(){\n    const {hpContext, setHpContext} = useContext(HomePageContext);\n    const [rooms, setRooms] = useState([]);\n    const [elements, setElements] = useState([]);\n\n    useEffect(() => {\n        async function doAsync(){\n            var tempRooms = await RoomsAPI.getRooms();\n            await setRooms(tempRooms.data);\n        };\n        doAsync();\n    }, []);\n\n    useEffect(() => {\n        setElements(rooms.map(room => room.active ? <NavDropdown.Item key={`room_${room.number}`} onClick={() => {onRoomSelect(room.name, room.id)}}>{room.name}</NavDropdown.Item> : null));\n    }, [rooms]);\n    \n    useEffect(() => {\n        if(rooms.length > 0) onRoomSelect(rooms[0].name, rooms[0].id);\n    }, [elements]);\n\n    const onRoomSelect = (name, id) => {\n        if(hpContext.roomSelection.id === id) return;\n        setHpContext({...hpContext, roomSelection: {...hpContext.roomSelection, name: name, id: id}});\n    };\n\n    return(\n        <NavDropdown title={hpContext.roomSelection.name ? hpContext.roomSelection.name : \"Raum\"} align=\"end\">\n            {elements}\n        </NavDropdown>\n    );\n}"],"mappings":"+iBAAA;AACA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,CAAoCC,UAApC,KAAqD,OAArD,CACA,OAAQC,GAAR,CAAaC,WAAb,KAA+B,iBAA/B,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA;2CACA,GAAMC,SAAQ,CAAGC,OAAO,CAAC,iBAAD,CAAxB,CAEA,cAAe,SAASC,cAAT,EAAwB,CAAC,mBAChC,KAAC,GAAD,wBACI,KAAC,YAAD,IADJ,EADgC,CAKvC,EAED,QAASC,aAAT,EAAuB,CACnB,gBAAkCP,UAAU,CAACG,eAAD,CAA5C,CAAOK,SAAP,aAAOA,SAAP,CAAkBC,YAAlB,aAAkBA,YAAlB,CACA,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eAEAf,SAAS,CAAC,UAAM,SACGgB,QADH,iIACZ,yKAC0BV,SAAQ,CAACW,QAAT,EAD1B,QACQC,SADR,qCAEUL,SAAQ,CAACK,SAAS,CAACC,IAAX,CAFlB,uDADY,0CAIX,CACDH,OAAO,GACV,CANQ,CAMN,EANM,CAAT,CAQAhB,SAAS,CAAC,UAAM,CACZe,WAAW,CAACH,KAAK,CAACQ,GAAN,CAAU,SAAAC,IAAI,QAAIA,KAAI,CAACC,MAAL,cAAc,KAAC,WAAD,CAAa,IAAb,EAA8C,OAAO,CAAE,kBAAM,CAACC,YAAY,CAACF,IAAI,CAACG,IAAN,CAAYH,IAAI,CAACI,EAAjB,CAAZ,CAAiC,CAA/F,UAAkGJ,IAAI,CAACG,IAAvG,iBAA+BH,IAAI,CAACK,MAApC,EAAd,CAAgJ,IAApJ,EAAd,CAAD,CAAX,CACH,CAFQ,CAEN,CAACd,KAAD,CAFM,CAAT,CAIAZ,SAAS,CAAC,UAAM,CACZ,GAAGY,KAAK,CAACe,MAAN,CAAe,CAAlB,CAAqBJ,YAAY,CAACX,KAAK,CAAC,CAAD,CAAL,CAASY,IAAV,CAAgBZ,KAAK,CAAC,CAAD,CAAL,CAASa,EAAzB,CAAZ,CACxB,CAFQ,CAEN,CAACX,QAAD,CAFM,CAAT,CAIA,GAAMS,aAAY,CAAG,QAAfA,aAAe,CAACC,IAAD,CAAOC,EAAP,CAAc,CAC/B,GAAGf,SAAS,CAACkB,aAAV,CAAwBH,EAAxB,GAA+BA,EAAlC,CAAsC,OACtCd,YAAY,gCAAKD,SAAL,MAAgBkB,aAAa,gCAAMlB,SAAS,CAACkB,aAAhB,MAA+BJ,IAAI,CAAEA,IAArC,CAA2CC,EAAE,CAAEA,EAA/C,EAA7B,GAAZ,CACH,CAHD,CAKA,mBACI,KAAC,WAAD,EAAa,KAAK,CAAEf,SAAS,CAACkB,aAAV,CAAwBJ,IAAxB,CAA+Bd,SAAS,CAACkB,aAAV,CAAwBJ,IAAvD,CAA8D,MAAlF,CAA0F,KAAK,CAAC,KAAhG,UACKV,QADL,EADJ,CAKH"},"metadata":{},"sourceType":"module"}