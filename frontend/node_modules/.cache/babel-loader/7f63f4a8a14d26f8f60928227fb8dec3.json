{"ast":null,"code":"import _regeneratorRuntime from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/oliver/Desktop/awl-raumreservierung/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var apiRequest=require('./base').apiRequest;export default function apiLogin(_x,_x2){return _apiLogin.apply(this,arguments);}function _apiLogin(){_apiLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return apiRequest('login',\"POST\",{username:username,password:password});case 2:response=_context.sent;if(!(response.status===200)){_context.next=11;break;}localStorage.setItem(\"loginUsername\",username);localStorage.setItem(\"loginToken\",response.data.value.stringToken);localStorage.setItem(\"loginAdmin\",response.data.value.role===\"Admin\"?true:false);_context.next=9;return apiRequest(\"user/\".concat(username));case 9:response=_context.sent;if(response.status===200){localStorage.setItem(\"loginFirstName\",response.data.firstName);localStorage.setItem(\"loginLastName\",response.data.lastname);}case 11:return _context.abrupt(\"return\",response);case 12:case\"end\":return _context.stop();}}},_callee);}));return _apiLogin.apply(this,arguments);}export function apiLogout(){localStorage.clear();}","map":{"version":3,"names":["apiRequest","require","apiLogin","username","password","response","status","localStorage","setItem","data","value","stringToken","role","firstName","lastname","apiLogout","clear"],"sources":["/home/oliver/Desktop/awl-raumreservierung/frontend/src/api/login.js"],"sourcesContent":["const apiRequest = require('./base').apiRequest;\n\nexport default async function apiLogin(username, password){\n    var response = await apiRequest('login', \"POST\", {username: username, password: password});\n\n    if(response.status === 200){\n        localStorage.setItem(\"loginUsername\", username);\n        localStorage.setItem(\"loginToken\", response.data.value.stringToken);\n        localStorage.setItem(\"loginAdmin\", response.data.value.role === \"Admin\" ? true : false);\n        response = await apiRequest(`user/${username}`);\n        if(response.status === 200){\n            localStorage.setItem(\"loginFirstName\", response.data.firstName);\n            localStorage.setItem(\"loginLastName\", response.data.lastname);\n        }\n    }\n\n    return response;\n}\n\nexport function apiLogout(){\n    localStorage.clear();\n}"],"mappings":"gSAAA,GAAMA,WAAU,CAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,UAArC,CAEA,uBAA8BE,SAA9B,iD,yFAAe,iBAAwBC,QAAxB,CAAkCC,QAAlC,uJACUJ,WAAU,CAAC,OAAD,CAAU,MAAV,CAAkB,CAACG,QAAQ,CAAEA,QAAX,CAAqBC,QAAQ,CAAEA,QAA/B,CAAlB,CADpB,QACPC,QADO,oBAGRA,QAAQ,CAACC,MAAT,GAAoB,GAHZ,2BAIPC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCL,QAAtC,EACAI,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCH,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoBC,WAAvD,EACAJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCH,QAAQ,CAACI,IAAT,CAAcC,KAAd,CAAoBE,IAApB,GAA6B,OAA7B,CAAuC,IAAvC,CAA8C,KAAjF,EANO,sBAOUZ,WAAU,gBAASG,QAAT,EAPpB,QAOPE,QAPO,eAQP,GAAGA,QAAQ,CAACC,MAAT,GAAoB,GAAvB,CAA2B,CACvBC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAuCH,QAAQ,CAACI,IAAT,CAAcI,SAArD,EACAN,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCH,QAAQ,CAACI,IAAT,CAAcK,QAApD,EACH,CAXM,wCAcJT,QAdI,yD,2CAiBf,MAAO,SAASU,UAAT,EAAoB,CACvBR,YAAY,CAACS,KAAb,GACH"},"metadata":{},"sourceType":"module"}