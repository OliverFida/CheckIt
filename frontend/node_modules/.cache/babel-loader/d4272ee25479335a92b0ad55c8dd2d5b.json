{"ast":null,"code":"var _jsxFileName = \"/home/oliver/Desktop/awl-raumreservierung/frontend/src/pages/components/StundenplanBody.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\n// Component imports\nimport React, { useState, useEffect, useContext } from 'react';\nimport { HomePageContext } from '../../contexts/HomePageContext';\nimport StundenplanBooking from './StundenplanBooking';\nimport moment from 'moment'; // API imports\n\nimport BookingsAPI from '../../api/bookings';\nimport timesMap from '../../api/timesMap.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst amountWeeks = 6;\nexport default function StundenplanBody() {\n  _s();\n\n  const {\n    hpContext,\n    setHpContext\n  } = useContext(HomePageContext);\n  const [elements, setElements] = useState([]);\n  useEffect(() => {\n    var newElements = [];\n    timesMap.forEach(lesson => {\n      newElements.push( /*#__PURE__*/_jsxDEV(StundenplanRow, {\n        lesson: lesson\n      }, `row_${lesson.key}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 30\n      }, this));\n    });\n    setElements(newElements);\n  }, []);\n  useEffect(() => {\n    async function doAsync() {\n      console.log(\"RoomID changed [Body]: \" + hpContext.roomSelection.id);\n      if (hpContext.roomSelection.id === null) return; //TODO: Double reloading\n\n      await setHpContext({ ...hpContext,\n        bookingsLoaded: false\n      });\n      console.log(\"Getting Bookings\");\n      var temp = await BookingsAPI.getBookings(hpContext.roomSelection.id, moment().weekday(1).toJSON(), moment().weekday(5).add(amountWeeks - 1, 'weeks').toJSON());\n      await setHpContext({ ...hpContext,\n        bookingsLoaded: true,\n        bookings: temp,\n        reloadBookings: false\n      });\n    }\n\n    doAsync();\n  }, [hpContext.roomSelection.id, hpContext.reloadBookings]);\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: elements\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n\n_s(StundenplanBody, \"CrVX0qmsFoIM1Ii75fySv8HwqVo=\");\n\n_c = StundenplanBody;\n\nfunction StundenplanRow(_ref) {\n  _s2();\n\n  let {\n    lesson\n  } = _ref;\n  const [elements, setElements] = useState([]);\n  useEffect(() => {\n    var newElements = [];\n\n    for (var day = 1; day < amountWeeks; day++) {\n      if (lesson.key !== \"break\") {\n        newElements.push( /*#__PURE__*/_jsxDEV(StundenplanBooking, {\n          day: day,\n          lesson: lesson\n        }, `booking_${day}_${lesson.key}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 34\n        }, this));\n      } else {\n        newElements.push( /*#__PURE__*/_jsxDEV(\"td\", {}, `break_${day}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 34\n        }, this));\n      }\n    }\n\n    setElements(newElements);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(StundenplanRowTitle, {\n      lesson: lesson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), elements]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(StundenplanRow, \"rnsLSlgiu0CUupiHKeHSUyZhdlU=\");\n\n_c2 = StundenplanRow;\n\nfunction StundenplanRowTitle(_ref2) {\n  _s3();\n\n  let {\n    lesson\n  } = _ref2;\n  const [title, setTitle] = useState(\"\");\n  useEffect(() => {\n    if (lesson.key !== \"break\") {\n      setTitle(`Stunde ${lesson.key}`);\n    } else {\n      setTitle(\"Pause\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"td\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rowTitle\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [lesson.start, \" - \", lesson.end]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, \"title\", false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(StundenplanRowTitle, \"KVloY4aBnAsUx9ZgEWLRkHjxAyc=\");\n\n_c3 = StundenplanRowTitle;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StundenplanBody\");\n$RefreshReg$(_c2, \"StundenplanRow\");\n$RefreshReg$(_c3, \"StundenplanRowTitle\");","map":{"version":3,"names":["React","useState","useEffect","useContext","HomePageContext","StundenplanBooking","moment","BookingsAPI","timesMap","amountWeeks","StundenplanBody","hpContext","setHpContext","elements","setElements","newElements","forEach","lesson","push","key","doAsync","console","log","roomSelection","id","bookingsLoaded","temp","getBookings","weekday","toJSON","add","bookings","reloadBookings","StundenplanRow","day","StundenplanRowTitle","title","setTitle","start","end"],"sources":["/home/oliver/Desktop/awl-raumreservierung/frontend/src/pages/components/StundenplanBody.js"],"sourcesContent":["// Component imports\nimport React, {useState, useEffect, useContext} from 'react';\nimport { HomePageContext } from '../../contexts/HomePageContext';\nimport StundenplanBooking from './StundenplanBooking';\nimport moment from 'moment';\n// API imports\nimport BookingsAPI from '../../api/bookings';\nimport timesMap from '../../api/timesMap.json';\n\nconst amountWeeks = 6;\n\nexport default function StundenplanBody(){\n    const {hpContext, setHpContext} = useContext(HomePageContext);\n    const [elements, setElements] = useState([]);\n    \n    useEffect(() => {\n        var newElements = [];\n        timesMap.forEach(lesson => {\n            newElements.push(<StundenplanRow key={`row_${lesson.key}`} lesson={lesson} />);\n        });\n        setElements(newElements);\n    }, []);\n\n    useEffect(() => {\n        async function doAsync(){\n            console.log(\"RoomID changed [Body]: \" + hpContext.roomSelection.id);\n            if(hpContext.roomSelection.id === null) return; //TODO: Double reloading\n            await setHpContext({...hpContext, bookingsLoaded: false});\n            console.log(\"Getting Bookings\");\n            var temp = await BookingsAPI.getBookings(hpContext.roomSelection.id, moment().weekday(1).toJSON(), moment().weekday(5).add(amountWeeks - 1, 'weeks').toJSON());\n            await setHpContext({...hpContext, bookingsLoaded: true, bookings: temp, reloadBookings: false});\n        }\n        doAsync();\n    }, [hpContext.roomSelection.id, hpContext.reloadBookings]);\n\n    return(\n        <tbody>\n            {elements}\n        </tbody>\n    );\n}\n\nfunction StundenplanRow({lesson}){\n    const [elements, setElements] = useState([]);\n\n    useEffect(() => {\n        var newElements = [];\n        for(var day = 1; day < amountWeeks; day++){\n            if(lesson.key !== \"break\"){\n                newElements.push(<StundenplanBooking key={`booking_${day}_${lesson.key}`} day={day} lesson={lesson} />);\n            }else{\n                newElements.push(<td key={`break_${day}`} />);\n            }\n        }\n        setElements(newElements);\n    }, []);\n\n    return(\n        <tr>\n            <StundenplanRowTitle lesson={lesson} />\n            {elements}\n        </tr>\n    );\n}\n\nfunction StundenplanRowTitle({lesson}){\n    const [title, setTitle] = useState(\"\");\n\n    useEffect(() => {\n        if(lesson.key !== \"break\"){\n            setTitle(`Stunde ${lesson.key}`);\n        }else{\n            setTitle(\"Pause\");\n        }\n    }, []);\n\n    return(\n        <td key=\"title\">\n            <div className=\"rowTitle\">\n                <span><b>{title}</b></span>\n                <span>{lesson.start} - {lesson.end}</span>\n            </div>\n        </td>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}